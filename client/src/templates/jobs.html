<div data-ng-controller="JobsCtrl">
    <div class="row">
        <div class="col-lg-6">
            <rd-widget>
                <rd-widget-header icon="fa-tasks" title="Jobs">
                    <i class="fa fa-user" style="margin-right: 13px;"></i>
                    <div class="btn-group">
                        <label class="btn btn-xs btn-primary" ng-model="search.jobsOwner" btn-radio="'my'" >Moi</label>
                        <label class="btn btn-xs btn-primary" ng-model="search.jobsOwner" btn-radio="'all'" >Tous</label>
                    </div>
                    <br/>
                    <i class="fa fa-search"></i>
                    <input type="text" ng-model="search.query" placeholder="Recherche" class="form-control input-sm" style="display: inline;max-width: 100px;padding:5px;" />
                </rd-widget-header>
                <rd-widget-body classes="no-padding">
                    <div class="table-responsive">
                        <table class="table table-hover" ng-show="jobs.length">

                            <tbody>
                                <tr>
                                    <th>ID</th>
                                    <th>Name </th>
                                    <th>User</th>
                                    <th>Partition</th>
                                    <th>Remaining<br/>time</th>
                                    <th>Nb<br/>CPU</th>
                                    <th>Nodes</th><!-- -->
                                </tr>
                                <tr ng-repeat="job in filteredJobs = (jobs | filter: (search.jobsOwner == 'my' || '') && {username:user.username} | filter: search.query)" ng-click="goToJob(job)" style="cursor: pointer;">
                                    <td>
                                        <span><swa-job-state state="{{job.state}}" reason="{{job.reasonWaiting}}"></swa-job-state> {{job.id}}</span>
                                    </td>
                                    <td>
                                        <span>{{job.name}}</span>
                                    </td>
                                    <td>
                                        <span>{{job.username}}</span>
                                    </td>
                                    <td>
                                        <span>{{job.partition}}</span>
                                    </td>
                                    <td>
                                        <span>{{job.time}}</span>
                                    </td>
                                    <td>
                                        <span>{{job.nbCPU}}</span>
                                    </td>
                                    <td>
                                        <span><button ng-show="job.nodes != null" class="btn btn-xs btn-info">{{job.nodes}}</button></span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div ng-show="!filteredJobs.length">
                        <p class="text-center"><i>Aucun jobs</i></p>
                    </div>
                </rd-widget-body>
            </rd-widget>
            LÃ©gende :   <swa-job-state state="CD" description="true"></swa-job-state>
                        <swa-job-state state="CG" description="true"></swa-job-state>
                        <swa-job-state state="CF" description="true"></swa-job-state>
                        <swa-job-state state="PD" description="true"></swa-job-state>
                        <swa-job-state state="R" description="true"></swa-job-state>
                        <swa-job-state state="S" description="true"></swa-job-state>
                        <swa-job-state state="CA" description="true"></swa-job-state>
                        <swa-job-state state="TO" description="true"></swa-job-state>
                        <swa-job-state state="F" description="true"></swa-job-state>
                        <swa-job-state state="NF" description="true"></swa-job-state>
                        <swa-job-state state="PR" description="true"></swa-job-state>
        </div>
    </div>
</div>
